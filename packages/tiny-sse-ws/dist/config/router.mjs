import m from"express-ws";import u from"../routes/sse.mjs";import i from"../routes/ws.mjs";import p from"../routes/push.mjs";import{logger as f}from"../utils/logger.mjs";import{Result as t}from"./Result.mjs";import{getSessionMiddleware as n}from"../middleware/session.mjs";function l(o){o.use(n()),o.use("/sse",u),o.use("/push",p),o.use("/ws",i),m(o),o.use((s,r)=>{r.status(404).send(t.notFound(null))}),o.use((s,r,e,a)=>{f.error(s.stack),e.status(500).send(t.coreFail(s.message))})}export{l as useRoutes};
